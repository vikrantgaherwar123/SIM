<div class="row main-wrapper">
  <div class="col-12" id="main">
    <div class="row">
      <div id="msgInv" class="col-12 col-md-9 item-form all-invoices inv-generator inv-gen">
        <form #invoiceGeneratorAdd="ngForm" id="invoiceGeneratorAdd" name="invoiceGenerator"
          class="create-invoice" (ngSubmit)="save(invoiceGeneratorAdd.valid)"
        >
          <div class="shadow back p-4">
            <div class="col-12">
              <div class="vtop text-right">
                <span class="c-name" type="text" id="titleAdd" name="title">
                  {{settings.mTvInvoice ? settings.mTvInvoice : 'INV_LABEL' | translate}}
                </span>
              </div>

              <div class="col-12 px-0 mb-1">
                <!-- Invoice Details Header -->
                <div class="row mx-0">
                  <div class="col-12 col-sm-7 px-0" id="clientDataAdd" name="clientData">
                    <div class="row">
                      <!-- Billing To -->
                      <div class="col-10">
                        <span type="text" value="" id="billToLabelAdd" class="adr bill-to font-custom-bold">
                          {{settings.mTvBillTo ? settings.mTvBillTo : 'BILL_TO_LABEL' | translate}}
                        </span>

                        <div class="input-group pl-0 inputWithIcon">
                          <input type="text" id="bill-to-input" style="height: 40px !important;" class="form-control billing-input" placeholder="Search & Select Client"
                            matInput [formControl]="billingTo" [matAutocomplete]="auto1" *ngIf="!edit" (click)="closeAddClientModal()"
                          >
                          <i *ngIf="disableIcon === true" class="fa fa-search" aria-hidden="true" style="padding: 9px 15px;"></i>
                          <span *ngIf="disableIcon === true" class="downArrowIcon">
                          <i style="left: -30px !important;" class="fa fa-chevron-down " aria-hidden="true"></i>
                          </span>
                          <a id="back2Top" title="Back to top" href="#">&#10148;</a> <!--Arrow Scroll when page ends-->

                          <div class="input-group-append">
                            <a *ngIf="!edit && billingTo.value" class="input-group-text" id="basic-addon2" (click)="closeAddClientModal()">X</a>
                          </div>

                          <div *ngIf="edit && billingTo.value" class="font-custom-bold">{{billingTo.value.name}}</div>
                          <mat-autocomplete #auto1="matAutocomplete" class="mCustomScrollbar style-3" [displayWith]="displayWith"
                            autoActiveFirstOption (optionSelected)="selectedClientChange($event)"  id="style-3"
                          >
                            <button *ngIf="openClientModal === false" (click)="openAddClientModal()"
                              class="btn btn-primary add_client_btn">
                              <i class="fa fa-plus"></i>
                              Add New Client
                            </button>
                            <mat-option style="color: #2c3e59" *ngFor="let client of (filteredClients | async | orderBy:'name':false:false)" [value]="client">
                              {{client.name}}
                            </mat-option>
                            <mat-option *ngIf="filteredClients && (filteredClients | async).length == 0" [value]="billingTo.value">
                              Add Client {{billingTo.value}}
                            </mat-option>
                          </mat-autocomplete>
                        </div>
                      </div>

                      <div class="col-2" style="padding-top: 30px;">
                        <span>
                          <i *ngIf="clientListLoading" class="fa fa-spinner fa-spin" style="font-size:24px;"></i>
                        </span>
                      </div>

                      <!-- Address and Shipping Address -->
                      <div id="addressBarAdd" name="addressBar" class="col-12" style="margin-bottom: 15px;padding-top: 16px;">
                        <div class="row mx-0">
                          <div class="col-6 pl-0">
                            <span type="text" value="" id="BillAddressAdd" class="adr bill-to font-custom-bold">Address</span><br />
                            <div class="address-render" *ngIf="activeClient">{{activeClient.addressLine1}}<br /></div>
                            <div *ngIf="activeClient && activeClient.email">
                              Email: {{activeClient.email}}
                            </div>
                            <div *ngIf="activeClient && activeClient.number">
                              Contact No: {{activeClient.number}}
                            </div>
                          </div>
                          <div class="col-6 pr-0">
                            <span type="text" value="" id="shippingAddressAdd" class="adr bill-to font-custom-bold">
                              Shipping Address
                            </span>
                            <div class="address-render" *ngIf="disableIcon === false">{{shippingAddress}}<br /></div>
                            <div class="address-render" *ngIf="activeClient && shippingAdressChanged === true">{{activeClient.shippingAddress}}<br /></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Invoice Number and Dates -->
                  <div class="col-12 col-sm-5 pr-0" id="invDataAdd">
                    <div class="row">
                      <div class="col-4 col-md-4 pr-0" style="margin-top: 6px;">
                        <span class="font-custom-bold text-left w-100">Invoice</span>
                      </div>
                      <div class="col-8">
                        <form #invNumberForm="ngForm" name="invNumberForm">
                          <div class="form-group" [class.has-error]="(invNumberForm.submitted || invNumberForm.invoiceNumber )
                            && invNumberForm.invoiceNumber.$error.required"
                          >
                            <input type="text" id="invoiceNumber" name="invoiceNumber" class="form-control pr-0"
                              [(ngModel)]="activeInvoice.invoice_number" required onfocus="this.select()"
                            />
                            <span *ngIf="activeInvoice.invoice_number === '' " class="fa fa-info-circle errspan"></span> <!--show error icon if no invoice number-->
                            <div class="form-error" *ngIf="invNumberForm.submitted || invNumberForm.invoiceNumber">
                              <span class="span_padng_top" *ngIf="invNumberForm.invoiceNumber.error.required">Invoice No. required</span>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-4 col-md-4 pr-0" style="margin-top: 6px;">
                        <span class="font-custom-bold text-left w-100">Invoice Date</span>
                      </div>
                      <div class="col-8">
                        <div style="max-width: 100%;">
                          <div class="row mx-0">
                            <input type="text" class="form-control" placeholder="mm/dd/yyyy" required readonly
                              [formControl]="invoiceDate" 
                              matInput [matDatepicker]="picker" (click)="picker.open()" onfocus="this.select()"             
                            >
                            <!-- <input class="form-control" name="formatedDate" [ngModelOptions]="{standalone: true}" matInput [matDatepicker]="picker" (click)="picker.open()"> -->
                            <mat-datepicker #picker></mat-datepicker>
                          </div>
                        </div>
                        <div class="form-error" *ngIf="invoiceGeneratorAdd.submitted || invoiceGeneratorAdd.touched">
                          <span class="span_padng_top" *ngIf="invoiceGeneratorAdd.error">Invoice date required</span>
                        </div>
                        <input type="hidden" [(ngModel)]="activeInvoice.created_date" name="createdDate"/>
                      </div>
                    </div>
                    <!-- <input type="text" class="form-control" placeholder="mm/dd/yyyy" required readonly
                    [(ngModel)]="formatedDate" name="formatedDate" [ngModelOptions]="{standalone: true}"
                    matInput [matDatepicker]="picker"
                  >
                  <mat-datepicker #picker></mat-datepicker> -->

                    <div class="row">
                      <div class="col-md-4 col-4 pr-0" style="margin-top: 6px;">
                        <span class="font-custom-bold text-left w-100">Reference</span>
                      </div>
                      <div class="col-8">
                        <input type="text" id="referenceid" name="invoiceNumber" class="form-control pr-0"
                          [(ngModel)]="activeInvoice.reference" onfocus="this.select()"
                        />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-4 col-md-4 pr-0" style="margin-top: 6px;">
                        <span class="font-custom-bold text-left w-100">
                          Due On
                          <!-- {{settings.mTvDueDate ? settings.mTvDueDate : 'DUE_DATE_LABEL' | translate}} -->
                        </span>
                      </div>
                      <div class="col-8 selectDueDate form-group" style="margin-top: -5px;">
                        <div class="selectdiv">
                        <select name="selectDueDate" id="selectDueDate" [value]="activeInvoice.due_date_flag || 0"
                          class="form-control pr-0 selectDueDate" (change)="changeDueDate($event.target.value)"
                           style="cursor: pointer;"
                        >
                          <option value="0">No Due Date</option>
                          <option value="1">Immediately</option>
                          <option value="2">Custom Date</option>
                          <option value="3">7 Days</option>
                          <option value="4">10 Days</option>
                          <option value="5">15 Days</option>
                          <option value="6">30 Days</option>
                          <option value="7">45 Days</option>
                          <option value="8">60 Days</option>
                          <option value="9">90 Days</option>
                        </select>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-4 pr-0"> 
                        </div>
                        <div class="col-8" *ngIf="activeInvoice.due_date_flag">
                            <div style="margin-top: 3px;" *ngIf="activeInvoice.due_date_flag !== 2">
                                <div>
                                  <input type="text" name="dueDate" class="form-control"
                                    [value]="activeInvoice.due_date | date: 'MM/dd/yyyy'" required readonly
                                  >
                                </div>
                            </div>
                        </div>
                      </div>
                      <div class="row">
                          <div class="col-md-4 col-4 pr-0"> 
                          </div>
                          <div class="col-8" *ngIf="activeInvoice.due_date_flag === 2">
                              <div style="margin-top: 3px;">
                                  <input type="text" name="dueDate" class="form-control"
                              [formControl]="dueDate" matInput [matDatepicker]="picker1" required readonly
                              (click)="picker1.open()"
                            >
                            <mat-datepicker #picker1></mat-datepicker>
                              </div>
                          </div>
                        </div>
                  </div>
                </div>
                <!-- <div style="float: right; margin-top: 3px;" *ngIf="activeInvoice.due_date_flag === 2">
                    <div class="row mx-0">
                      <input type="text" name="dueDate" class="form-control"
                        [formControl]="dueDate" matInput [matDatepicker]="picker1" required readonly
                        (click)="picker1.open()"
                      >
                      <mat-datepicker #picker1></mat-datepicker>
                    </div>
                </div> -->

                <!-- Items table -->
                <div class="lineItemDiv">
                  <table  width="100%" cellpadding="0" cellspacing="0" class="column table table-striped" style="table-layout: fixed">
                    <thead>
                      <tr class="hd">
                        <td width="20%">
                          <input style="margin-left: 10px;" type="text" id="itemLable" class="bld w-100 text-left" disabled
                            value="{{settings.mTvProducts ? settings.mTvProducts : 'PRO_LABEL' | translate}}"
                          />
                        </td>
                        <td width="10%">
                          <input type="text" id="itemQtyLabel" class="bld w-100 text-center" name="quantity" disabled
                            value="{{settings.mTvQty ? settings.mTvQty : 'QTY_LABEL' | translate}}"
                          />
                        </td>
                        <td width="10%">
                          <input type="text" id="itemRateLabel" class="bld w-100 text-center" name="rate" disabled
                            value="{{settings.mTvRate ? settings.mTvRate : 'RATE_LABEL' | translate}}"
                          />
                        </td>
                        <td width="10%" *ngIf="settings.taxFlagLevel === 0">
                          <input type="text" id="itemTaxLabel" class="bld w-100 text-center" name="tax-rate" disabled
                            value="Tax (%)"
                          />
                        </td>
                        <td width="10%" *ngIf="settings.discountFlagLevel === 1">
                          <input type="text" id="itemDiscountLabel" class="bld w-100 text-center" name="discount" disabled
                            value="Discount (%)"
                          />
                        </td>
                        <td width="10%">
                          <input type="text" id="itemAmtLabelAdd" class="bld w-100 text-center" name="amount" disabled
                            value="{{settings.mTvAmount ? settings.mTvAmount : 'AMT_LABEL' | translate}}"
                          />
                        </td>
                        <td width="4%" class="text-center" style="font-family: inherit; font-weight:100">Edit</td>
                        <td width="4%" class="text-center" style="font-family: inherit; font-weight:100">Delete</td>  
                      </tr>
                    </thead>

                    <tbody class="lineItems">
                      <!-- selected Items list -->
                      <tr class="row-item" *ngFor="let item of activeInvoice.listItems; let index = index; let last = last">
                        <td [class.no-border-last]="last" >
                          <div class="">
                            <div class="form-group" style="margin-bottom: -12px;margin-top: 8px;">
                              <div class="text-left product-color" style="margin-left: 10px;">
                                {{item.product_name}}
                              </div>
                            <div>
                              <pre class="text-left selected-items mCustomScrollbar style-3"  style="margin-left: 10px;font-family: quicksand_regular !important;">{{item.description}}</pre>
                            </div>
                            </div>
                          </div>
                        </td>
                        <td [class.no-border-last]="last">
                          <div class="text-center">
                            {{item.quantity | number:'2.'}}
                          </div>
                        </td>
                        <td [class.no-border-last]="last">
                          <div class="text-center">
                            {{item.rate | number:'2.'}}
                          </div>
                        </td>
                        <td [class.no-border-last]="last" *ngIf="settings.taxFlagLevel === 0">
                          <div class="text-center">
                            {{item.tax_rate | number:'2.'}}
                          </div>
                        </td>
                        <td [class.no-border-last]="last" *ngIf="settings.discountFlagLevel === 1">
                          <div class="text-center">
                            {{item.discount | number:'2.'}}
                          </div>
                        </td>
                        <td [class.no-border-last]="last" style="position: unset !important;" >
                          <div class="text-center">
                            {{item.total | number:'2.'}}
                          </div>
                        </td>
                        <td [class.no-border-last]="last">
                          <div class="text-center">
                            <a class="closeicon show" title="Edit Row" (click)="editInvoiceItem(index)">
                              <img src="assets/images/edit_blue.png" class="del" style="height:20px;">
                            </a>
                          </div>
                        </td>
                        <td [class.no-border-last]="last">
                          <div class="text-center">
                            <a class="closeicon show" title="Delete Row" (click)="removeItem(index)">
                              <img src="assets/images/delete_dark.png" class="del" class="hg_20" style="margin-bottom: 7px;">
                            </a>
                          </div>
                        </td>
                      </tr>

                      <!-- Select Item for invoice input -->
                      <tr *ngIf="disableProductText === true" class="row-item" style="background-color: white !important;">
                        <td [class.no-border-last]="last">
                          <div class="form-group">
                            <input type="text" name="product-name" class="form-control billing-input" onfocus="this.select()"
                              placeholder="Type or Select Product" matInput [formControl]="addItem" [matAutocomplete]="auto" required
                            >
                            <span *ngIf="ifProductEmpty === true" class="fa fa-info-circle errspan help-block"></span>

                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayWith" class="mCustomScrollbar style-3"
                              (optionSelected)="fillItemDetails()"
                            >
                              <mat-option *ngFor="let product of (filteredProducts | async | orderBy:'prodName':false:true)" [value]="product">{{product.prodName}}</mat-option>
                            </mat-autocomplete>
                            <div class="custom-description">
                              <textarea id="descId" name="description_{{index}}" class="form-control font_wg_none mCustomScrollbar style-3" elastic
                                style="margin-top: 3px;min-height: 60px; max-height: 80px; height: 73px;"
                                *ngIf="modalDescription === true"
                                [(ngModel)]="activeItem.description"  placeholder="Description" onfocus="this.select()"
                              ></textarea>
                            </div>
                          </div>
                        </td>

                        <td style="vertical-align: top;" [class.no-border-last]="last">
                          <div class="form-group">
                            <input type="number" name="itemQty" id="qty" step="any" class="form-control text_center height_40" min="0"
                              [(ngModel)]="activeItem.quantity" (keyup)="calculateTotal()" onfocus="this.select()" required
                            />
                          </div>
                          <button type="button"  class="small_btn btn-custom-1" (click)="addEditInvoiceItem()"
                          >Add Item
                          </button>
                          
                        </td>

                        <td style="vertical-align: top;" [class.no-border-last]="last">
                          <div class="form-group">
                            <input type="number" name="itemRate" step="any" class="form-control text_center height_40" min=0
                              [(ngModel)]="activeItem.rate" (keyup)="calculateTotal()" onfocus="this.select()" required
                            />
                          </div>
                        </td>

                        <td style="vertical-align: top;" [class.no-border-last]="last" *ngIf="settings.taxFlagLevel === 0">
                          <div class="input-group">
                            <input type="number" name="itemTaxRate" class="form-control text_center height_40" min=0 max=100
                              [(ngModel)]="activeItem.tax_rate" (keyup)="calculateTotal()" onfocus="this.select()"
                            />
                            <div class="input-group-append">
                              <span class="input-group-text p-0">%</span>
                            </div>
                          </div>
                          <div class="text-right">{{activeItem.tax_amount}}</div>
                        </td>

                        <td style="vertical-align: top;" [class.no-border-last]="last" *ngIf="settings.discountFlagLevel === 1">
                          <div class="input-group">
                            <input type="number" name="itemDiscountRate" class="form-control text_center height_40" min=0 max=100
                              [(ngModel)]="activeItem.discount" (keyup)="calculateTotal()" onfocus="this.select()"
                            />
                            <div class="input-group-append">
                              <span class="input-group-text p-0">%</span>
                            </div>
                          </div>
                          <div class="text-right">{{activeItem.discount_amount}}</div>           
                        </td>

                        <td style="vertical-align: top; position: relative !important;" 
                          [class.no-border-last]="last"
                        >
                          <div class="form-group">
                            <input type="number" step="any" class="form-control text_center height_40" 
                              title="Amount is calculated automatically."
                              name="itemTotal" [(ngModel)]="activeItem.total" style="border: none;"  disabled
                            />
                            
                          </div>
                        </td>
                        <td style="vertical-align: top; position: relative !important;" 
                        [class.no-border-last]="last">
                            <img (click)="disableProductText=false;activeInvoice.listItems=undefined;" src="assets/images/cross.png" alt="logo" style="height: 24px;margin-top: 2px;">
                        </td>
                      </tr>
                      <button *ngIf="disableProductText === false" type="button"  class="small_btn btnd add-line-item-button" (click)="addEditInvoiceItem()"
                      (click)="disableProductText=true;ifProductEmpty=false" >Add Item
                      </button>
                    </tbody>
                  </table>
                </div>

                <!-- Tax discount list -->
                <div class="row">
                  <div class="col-12 offset-md-6 col-md-6 discount-tax-pad font-custom-bold" style="padding-bottom: 8px;">
                    <div *ngIf="settings.discountFlagLevel === 0 && activeInvoice.discount_on_item === 1 || activeInvoice.discount_on_item === 2">
                      <a class="inline" (click)="activeInvoice.discount_on_item=0;activeInvoice.percentage_flag = 0;activeInvoice.percentage_value=null;activeInvoice.discount=null">
                        {{settings.discount ? settings.discount : 'Discount'}}+
                      </a>
                    </div>
                    <div *ngIf="activeInvoice.shipping_charges === undefined">
                      <a class="inline" (click)="activeInvoice.shipping_charges = 0">
                        {{settings.shipping ? settings.shipping : 'Shipping'}}+
                      </a>
                    </div>
                    <div *ngIf="settings.taxFlagLevel === 1 && activeInvoice.tax_on_item === 2 || activeInvoice.tax_rate === 0"><!--settings.taxFlagLevel === 1 &&-->
                      <a class="inline" (click)="activeInvoice.tax_on_item=1">Tax+</a>
                    </div>
                    <div *ngIf="activeInvoice.adjustment === null || activeInvoice.adjustment === undefined">
                      <a class="inline" (click)="activeInvoice.adjustment = 0">
                        {{settings.adjustment ? settings.adjustment : 'ADJ_LABEL' | translate}}+
                      </a>
                    </div>
                    <div class="inline" *ngFor="let tax of settings.alstTaxName; let taxIndex = index">
                      <a *ngIf="!activeInvoice.taxList[taxIndex]"
                        (click)="activeInvoice.taxList[taxIndex] = {taxName: tax.taxName, calculateValue: tax.calculateValue}"
                      >
                        {{tax.taxName}}+
                      </a>
                    </div>
                  </div>
                </div>

                <!-- Bottom -->
                <div class="row">
                  <!--Term and Condition -->
                  <div class="col-12 col-md-6">
                    <div class="col-12 term-cond-label font-custom-bold" style="text-align: left">
                      <span class="bld">
                        {{settings.mTvTermsAndConditions ? settings.mTvTermsAndConditions : 'TERM_LABEL' | translate}}
                      </span>
                      <a (click)="openAddTermModal()" class="pull-right" data-original-title="Add " title="Add Term">
                        <img src="assets/images/add16.png" alt="logo"
                          style="vertical-align: initial;height:10px; margin-right: 3px;"
                        />
                        Add Terms
                      </a>
                    </div>

                    <div class="col-12 px-0" style="font-size: 13px;">
                      <div class="form-group" style="margin-top: 10px;">
                        <div *ngFor="let term of activeInvoice.termsAndConditions" class="row mx-0">
                          <div class="col-8 col-md-10 pr-0 mb-1" style="color: #a4a4a4;">
                            <span style="word-wrap: break-word">{{term.terms}}</span>
                          </div>
                          <div class="col-md-2 ml-auto" (click)="addRemoveTermsFromInvoice(term)" style="cursor:pointer;">
                            <a class="closeicon show float-right">
                              <img src="assets/images/delete_in_grey.png" class="del set-color" alt="" class="hg_16">
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Calculations -->
                  <div class="col-12 col-md-6">
                    <!-- Total -->
                    <div class="col-12 term-cond-label" style="margin-bottom: 5px;">
                      <div class="row">
                        <div class="col-6 text-left">
                          <span class="font-custom-bold">{{settings.subtotal ? settings.subtotal : 'SUB_TOT_LABEL' | translate}}</span>
                        </div>
                        <div class="col-6 text-right">
                          <span class="font-custom-bold">{{activeInvoice.gross_amount | currency:settings.currencyInText:(settings.currencyText ? 'code' : 'symbol'):'1.2-2'}}</span>
                        </div>
                      </div>
                    </div>

                    <!-- Discounts -->
                    <div class="row mr_right mr_0" *ngIf="activeInvoice.discount_on_item === 0"><!--|| activeInvoice.percentage_value!==0 || activeInvoice.discount !==0-->
                      <div class="col-5 discount-tax-label pr-0 label_color">
                        <span style="text-align: left;vertical-align: bottom;" class="inline">
                          {{settings.discount ? settings.discount : 'Discount'}}
                        </span>
                        <div *ngIf="activeInvoice.percentage_flag == 0" class="inline font-custom">
                          ({{mysymbols}})
                        </div>
                        <div *ngIf="activeInvoice.percentage_flag == 1" class="inline font-custom">(%)</div>

                        <div class="px-0" style="float: right; padding-right: 10px;">
                          <div style="cursor: pointer;" class="dropdown-toggle custom-dropdown " 
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                          >
                            <span class="glyphicon glyphicon-menu-down"
                              style="font-size: 14px;vertical-align: middle;" title="Discount"
                            ></span>
                          </div>
                          <ul class="dropdown-menu dropdown-menu-right">
                            <li [class.active]="activeInvoice.percentage_flag == 0">
                              <a (click)="activeInvoice.percentage_flag = 0;activeInvoice.discount=0.00;
                                calculateInvoice()">
                                Flat ({{mysymbols}})
                              </a><!--activeInvoice.discount=0.00;activeInvoice.percentage_flag = 0;-->
                            </li>
                            <li [class.active]="activeInvoice.percentage_flag == 1">
                              <a (click)="activeInvoice.discount=0.00;
                                activeInvoice.percentage_flag=1;
                                calculateInvoice()">
                                Percent (%)
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-2 pr-0">
                        <form #form_discount="ngForm" name="form_discount">
                          <div class="input-group addon-input">
                            <input type="number" id="percentage_input" name="percentage_input" class="form-control"
                              *ngIf="activeInvoice.percentage_flag == 1" min="1" max="5"
                              [(ngModel)]="activeInvoice.percentage_value" (keyup)="calculateInvoice()"
                              (ngModelChange)="dataChanged($event)" onfocus="this.select()" style="color: #aaaaaa;"
                            />

                            <input type="number" id="discount_input" name="discount_input" class="form-control"
                              min="0.00" [max]="100" step="any"
                              *ngIf="activeInvoice.percentage_flag == 0" 
                              [(ngModel)]="activeInvoice.discount" (keyup)="calculateInvoice()" onfocus="this.select()"
                            />
                          </div>
                        </form>
                      </div>
                      <div class="col-4 pr-0">
                        <input type="number" id="discount_input" name="discount_input" class="form-control text_center height_40 dis_tax_label" 
                        [(ngModel)]="activeInvoice.discount" (keyup)="calculateInvoice()" disabled style="color:#eaeaea"
                      />
                      </div>

                      <div class="input-group-addon pr-0 remove-button" style="margin-left: 9px;">
                          <div class="addon selector"
                            (click)="activeInvoice.discount_on_item=1;activeInvoice.percentage_flag=0;
                            activeInvoice.percentage_value=0;activeInvoice.discount=0;calculateInvoice();
                            activeInvoice.amount=activeInvoice.gross_amount;
                            balance=activeInvoice.gross_amount
                          "
                          ><!--activeInvoice.tax_amount-->
                            <img src="assets/images/grey_cross.png" alt="" class="hg_20 cross_label_img">
                          </div>                               
                      </div>
                      
                    </div>

                    <!-- Tax -->
                    <div class="row mr_right mr_0" *ngIf="activeInvoice.tax_on_item===1">
                      <div class="col-5 discount-tax-label pr-0 label_color">
                        <div class="d-inline font-custom">Tax (%)</div>
                      </div>

                      <div class="col-2 pr-0">
                        <form #form_tax_input="ngForm" name="form_tax_input">
                          <div class="input-group pr-0">
                            <input type="number" id="tax_input" name="tax_input" class="form-control"
                              step="any"min="0.00" max="100" required style="color: #aaaaaa;"
                              [(ngModel)]="activeInvoice.tax_rate" (keyup)="calculateInvoice()" onfocus="this.select()"
                            />
                          </div>
                        </form>
                      </div>
                      <div class="col-4 pr-0">
                        <input type="number" id="tax_input" name="tax_input" class="form-control text_center height_40 dis_tax_label" 
                        placeholder="00.000" [(ngModel)]="activeInvoice.tax_amount" (keyup)="calculateInvoice()" style="background-color:#eaeaea"
                      />
                      </div>
                      <div class="input-group-addon pr-0 remove-button" style="margin-left: 9px;">
                        <div class="addon selector" (click)="activeInvoice.tax_on_item = 2;activeInvoice.tax_rate = 0; activeInvoice.tax_amount = 0;calculateInvoice()">
                          <img src="assets/images/grey_cross.png" class="hg_20 cross_label_img">
                        </div>
                      </div>
                    </div>

                    <!-- Tax List -->
                    <div class="row mr_right mr_0" *ngFor="let tax of activeInvoice.taxList; let taxIndex = index">
                      <div class="col-5 discount-tax-label pr-0 label_color" *ngIf="tax">
                        <div class="d-inline font-custom">{{tax.taxName}} (%)</div>
                      </div>
  
                      <div class="col-7 pr-0" *ngIf="tax">
                        <form #form_tax_input="ngForm" name="form_tax_input">
                          <div class="input-group pr-0">
                            <input type="number" id="tax_input_list{{taxIndex}}" name="tax_input"
                              step="any" min="0.00" max="100" class="form-control" style="margin-right: -4px;"
                              [(ngModel)]="tax.percentage" (keyup)="calculateInvoice()" onfocus="this.select()"
                            />

                            <div class="input-group-addon pr-0 remove-button">
                              <div class="addon selector" (click)="activeInvoice.taxList[taxIndex] = null;calculateInvoice()">
                                <img src="assets/images/grey_cross.png" class="hg_20 cross_label_img">
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>

                    <!-- Shipping -->
                    <div class="row mr_right mr_0" *ngIf="activeInvoice.shipping_charges !== undefined">
                      <div class="col-5 discount-tax-label label_color">
                        <div class="inline" style="text-align: left;vertical-align: bottom;">
                          {{settings.shipping ? settings.shipping : 'Shipping'}}(+)
                        </div>
                      </div>

                      <div class="col-7 pr-0">
                        <form #form_shipping_input="ngForm" name="form_shipping_input">
                          <div class="input-group pr-0">
                            <input type="number" name="shipping_input" class="form-control" min="0.00" step="any"
                              [max]="activeInvoice.gross_amount" required onclick="this.select()" style="margin-right: -4px;"
                              [(ngModel)]="activeInvoice.shipping_charges" (keyup)="calculateInvoice()" placeholder="0"
                            />

                            <div class="input-group-addon pr-0 remove-button">
                              <div class="addon selector padr0" (click)="activeInvoice.shipping_charges = undefined;calculateInvoice()">
                                <img src="assets/images/grey_cross.png" alt="" class="hg_20 cross_label_img">
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>

                    <!-- Adjustment -->
                    <div class="row mr_right mr_0" *ngIf="activeInvoice.adjustment !== null && activeInvoice.adjustment !== undefined">
                      <div class="col-5 discount-tax-label pr-0 label_color">
                        <div style="text-align: left;vertical-align: bottom;">
                          {{settings.adjustment ? settings.adjustment : 'ADJ_LABEL' | translate}} (-)
                        </div>
                      </div>

                      <div class="col-7 pr-0">
                        <form #form_tax_input="ngForm" name="form_tax_input">
                          <div class="input-group pr-0">
                            <input type="number" name="tax_input" class="form-control" style="margin-right: -4px;"
                              step="any" required onfocus="this.select()" placeholder="0"
                              [(ngModel)]="activeInvoice.adjustment" (change)=setTwoNumberDecimal(activeInvoice.adjustment) (keyup)="calculateInvoice()"
                            />
                            
                            <!-- <div class="input-group-addon set-color">%</div>-->
                            <div class="input-group-addon pr-0 remove-button">
                              <div class="addon selector" (click)="activeInvoice.adjustment = undefined; calculateInvoice()">
                                <img src="assets/images/grey_cross.png" class="hg_20 cross_label_img">
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>

                    <!-- Gross Total -->
                    <div class="col-12 term-cond-label">
                      <div class="row">
                        <div class="col-6 text-left">
                          <span class="font-custom-bold">
                            {{settings.total ? settings.total : 'TOTAL_LABEL' | translate}}
                          </span>
                        </div>

                        <div class="col-6 text-right">
                          <span class="font-custom-bold">
                            {{activeInvoice.amount | currency:settings.currencyInText:(settings.currencyText ? 'code' : 'symbol'):'1.2-2'}}
                          </span>
                        </div>
                      </div>
                    </div>

                    <!-- Paid Amount -->
                    <div class="top_bot_mr_10">
                      <div class="row mx-0">
                        <div class="col-6 text-left">
                          <span class="font-custom">{{settings.paid ? settings.paid : 'PAID_LABEL' | translate}}</span>
                        </div>
                        <div class="col-6 text-right" style="padding-right: 10px !important;">
                          <span class="font-custom">{{(activeInvoice.amount - activeInvoice.balance) | currency:settings.currencyInText:(settings.currencyText ? 'code' : 'symbol'):'1.2-2'}}</span>
                        </div>
                      </div>
                    </div>
                    <hr *ngIf="(activeInvoice.amount - activeInvoice.balance)">
                    <div *ngFor="let item of activeInvoice.payments" class="top_bot_mr_10 pay_clr">
                        <div  class="row mx-0">
                          <div class="col-6 text-left label_color">
                            <span class="font-custom">{{item.date_of_payment | date}}</span>
                            <span *ngIf="!item.date_of_payment" class="font-custom">{{formatedDate | date}}</span>
                          </div>
                          <div class="col-6 text-right pad_rg_5">
                            <span class="font-custom">{{item.paid_amount | currency:settings.currencyInText:(settings.currencyText ? 'code' : 'symbol'):'1.2-2'}}</span>
                          </div>
                        </div>
                        
                    </div>

                    <!-- Balance -->
                    <div class="col-12 balance-row">
                      <div class="row mx-0">
                        <div class="col-6 text-left" style="margin-left: -12px;">
                          <span class="bld">{{settings.balance ? settings.balance : 'BAL_LABEL' | translate}}</span>
                        </div>
                        <div class="col-6 text-right">
                          <span class="bld" style="margin-right: -25px !important;">{{activeInvoice.balance | currency:settings.currencyInText:(settings.currencyText ? 'code' : 'symbol'):'1.2-2'}}</span>
                        </div>
                      </div>
                    </div>

                    <!-- Payment and Save buttons -->
                    <div class="col-12 px-0 mt-2">
                      <button type="button" title="ADD PAYMENT"
                        class="btn btnd btn-custom-1 btn-raised pull-left font-weight-bold" style="width: 134px;"
                        (click)="openAddPaymentModal()"
                      >
                        Add Payment
                      </button>
                     
                      <button type="submit" id="invSubmitBtn" [disabled]="activeInvoice.listItems?.length == 0"
                        class="btn save_btn btn-raised width25btn pull-right font-weight-bold"
                        data-loading-text="Saving..<i class='fa fa-spinner fa-spin '></i>"
                      >
                        Save
                      </button>
                      <button type="submit" *ngIf="edit" [disabled]="activeInvoice.listItems?.length == 0"
                      class="btn btnd btn-custom-2 no-border-radius pull-right ml-2 width12perbtn font-weight-bold"
                      style="margin-right: 8px;" (click)="deleteInvoice()"
                     
                    >
                      DELETE
                    </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <!-- Previous Invoices Button -->
      <div class="col-12 col-md-3">
        <button type="button" class="btn2 btn2-primary btn2-lg raised" (click)="router.navigate(['/invoice/view'])">Show All Invoices
        </button> 
        

        <!-- Delete Invoices Button -->
        <!-- <button type="button" class="btnd add-line-item-button" *ngIf="edit" (confirm)="deleteInvoice()"
          [swal]="{ title: 'Are you sure want to delete Invoice?', type: 'warning', showCancelButton: true,
            confirmButtonColor: '#DD6B55', confirmButtonText: 'Yes, delete it!' }
          "
        >
          Delete Invoices
        </button> -->
      </div>
    </div>
  </div>
</div>

<!-- ADD CLIENT MODAL -->
<div id="add-client" class="modal fade" role="dialog" aria-labelledby="clientFormLabel" 
  aria-hidden="true" data-backdrop="static" data-keyboard="false"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title form-header font-custom-bold header-color" id="clientFormLabel">
          Add New Client
        </h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <img src="assets/images/cross16.png" alt="logo">
        </button>
      </div>
      <div class="modal-body">
        <form class="form-horizontal add-client-form" name="clientform" #clientform="ngForm">
          <div class="col-12">
            <div class="row">
              <div class="col-6" style="padding-right: 23px;">
                <div class="form-group" [class.has-error]="(clientform.submitted && clientform.errors)">
                  <input type="text" name="name" class="form-control add-client-input-custom"
                    [(ngModel)]="addClientModal.name" placeholder="Organization Name" required
                  />
                  <div class="form-error" *ngIf="(clientform.submitted && clientform.errors)">
                    <span *ngIf="clientform.name.$error.required">Required</span>
                    <span *ngIf="errors">{{ errors.name[0] }}</span>
                  </div>
                </div>
              </div>

              <div class="col-6" style="padding-left: 23px;">
                <div class="form-group " [class.has-error]="(clientform.submitted && clientform.errors)">
                  <input type="text" name="contactPersonName" class="form-control add-client-input-custom"
                    [(ngModel)]="addClientModal.contactPersonName" placeholder="Contact Person" onfocus="this.select()"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="col-12">
            <div class="row">
              <div class="col-6" style="padding-right: 23px;">
                <div class="form-group " [class.has-error]="(clientform.submitted && clientform.errors)">
                  <input type="text" [(ngModel)]="addClientModal.email" name="email" class="form-control add-client-input-custom"
                    placeholder="Email" onfocus="this.select()" my-enter-in select-on-click
                  />
                </div>
              </div>
              <div class="col-6" style="padding-left: 23px;">
                <div class="form-group" [class.has-error]="(clientform.submitted && clientform.errors)">
                  <input type="text" [(ngModel)]="addClientModal.number" name="cont_number" class="form-control add-client-input-custom"
                    placeholder="Number" onfocus="this.select()" my-enter-in select-on-click
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="col-12">
            <div class="form-group add-client-input-width"
              [class.has-error]="(clientform.submitted && clientform.errors)"
            >
              <textarea elastic [(ngModel)]="addClientModal.addressLine1" name="addressLine1"
                class="form-control mCustomScrollbar style-3" placeholder="Address" select-on-click style="height: 69px !important;" onfocus="this.select()"
              ></textarea>
            </div>
          </div>

          <div class="col-12">
            <div class="form-group add-client-input-width"
              [class.has-error]="(clientform.submitted && clientform.errors)"
            >
              <textarea elastic [(ngModel)]="addClientModal.shippingAddress" name="shippingAddress" class="form-control mCustomScrollbar style-3"
                placeholder="Shipping Address" select-on-click style="height: 69px !important;" onfocus="this.select()"
              ></textarea>
            </div>
          </div>

          <div class="col-12">
            <div class="form-group add-client-input-width">
              <input type="text" [(ngModel)]="addClientModal.businessId" name="businessId" class="form-control add-client-input-custom"
                placeholder="Business Id " onfocus="this.select()" select-on-click
              />
            </div>
          </div>

          <div class="col-12">
            <div class="form-group add-client-input-width">
              <input type="text" [(ngModel)]="addClientModal.businessDetail" name="businessDetail" class="form-control add-client-input-custom"
                placeholder="Business Detail" onfocus="this.select()" my-enter-in select-on-click
              />
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-raised btn-custom-1 width20btn" (click)="closeAddClientModal()">
          Close
        </button>
        <button type="button" id="saveClientButton" class="btn  btn-raised  btn-success width20btn" data-loading-text="Saving..<i class='fa fa-spinner fa-spin '></i>"
          [disabled]="!clientform.valid" (click)="saveClient(clientform.valid)"
        >
          Add Client
        </button>
      </div>
    </div>
  </div>
</div>

<!-- EDIT ITEM MODAL -->
<div id="edit-item" class="modal fade" role="dialog" aria-labelledby="clientFormLabel" 
  aria-hidden="true" data-backdrop="static" data-keyboard="false"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title form-header font-custom-bold header-color" id="clientFormLabel">
          Edit Item
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="closeItemModel()">
          <img src="assets/images/cross16.png" alt="logo">
        </button>
      </div>
      <div class="modal-body">
        <form class="form-horizontal add-client-form" name="itemform" #itemform="ngForm">
          <input type="hidden" name="uid" onfocus="this.select()" [ngModel]="activeItem.unique_identifier">
          <div class="row">
            <div class="col-12">
              Name:
              <input type="text" name="name" class="form-control add-client-input-custom"
                [ngModel]="activeItem.product_name" placeholder="Name" onfocus="this.select()" required disabled
              />
            </div>

            <div class="col-12">
              Description:
              <textarea [(ngModel)]="activeItem.description" name="description" class="form-control mCustomScrollbar style-3"
                placeholder="Description" onfocus="this.select()" select-on-click style="max-height: 69px; height: 69px;"
              ></textarea>
            </div>

            <div class="col-12">
              Quantity (*):
              <input type="number" name="quantity" class="form-control add-client-input-custom"
                [(ngModel)]="activeItem.quantity" (keyup)="calculateTotal()" onfocus="this.select()" required
                placeholder="Quantity" my-enter-in select-on-click
              />
            </div>

            <div class="col-12">
              Rate (*):
              <input type="number" name="rate" class="form-control add-client-input-custom"
                [(ngModel)]="activeItem.rate" (keyup)="calculateTotal()" placeholder="Rate" onfocus="this.select()"
                required
              />
            </div>

            <div class="col-12" *ngIf="settings.taxFlagLevel === 0">
              Tax:
              <input type="number" name="tax-rate" class="form-control add-client-input-custom" min="0" max="100"
                [(ngModel)]="activeItem.tax_rate" (keyup)="calculateTotal()" placeholder="Rate" onfocus="this.select()"
              />
            </div>

            <div class="col-12" *ngIf="settings.discountFlagLevel === 1">
              Discount:
              <input type="number" name="discount" class="form-control add-client-input-custom"
                [(ngModel)]="activeItem.discount" (keyup)="calculateTotal()" placeholder="Discount" onfocus="this.select()"
              />
            </div>

            <div class="col-12">
              Total:
              <input type="number" [ngModel]="activeItem.total" name="total" placeholder="quantity" disabled
                class="form-control add-client-input-custom" onfocus="this.select()"
              />
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-raised btn-custom-1 width20btn" (click)="closeItemModel()">
          Close
        </button>
        <button type="button" id="saveClientButton" class="btn  btn-raised  btn-success width20btn"
          [disabled]="!itemform.valid" (click)="addEditInvoiceItem(itemform.controls.uid.value)"
        >
          Edit Item
        </button>
      </div>
    </div>
  </div>
</div>

<!-- ADD TERMS MODAL -->
<div id="add-terms" class="modal fade" tabindex="-1" role="dialog" 
  aria-labelledby="gridSystemModalLabel" data-backdrop="static" data-keyboard="false"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title form-header header-color font-custom-bold" id="addPaymentLabel">
          Add Terms & Condition
        </h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <img src="assets/images/cross16.png" alt="logo">
        </button>
      </div>

      <div class="modal-body">
        <form name="termForm" #termForm="ngForm">
          <div class="row">
            <div class="col-12">
              <div class="form-group">
                <textarea name="term" class="form-control" [(ngModel)]="addTermModal.terms"
                  placeholder="Add term & Condition" style="height: 110px !important;" onfocus="this.select()" required elastic
                ></textarea>
              </div>
            </div>
            <div class="col-12">
              <div class="checkbox pull-left">
                <!-- <input type="checkbox" id="addtermcheck" name="setDefault"
                  [(ngModel)]="addTermModal.setDefault"
                  class="ng-pristine ng-valid ng-touched modal-checkbox" onfocus="this.select()"
                > -->
                <div class="inline">Default?</div>
                  <label class="check">
                    <div>
                        <input type="checkbox" id="addtermcheck" name="setDefault"
                        [(ngModel)]="addTermModal.setDefault" checked
                        class="ng-pristine ng-valid ng-touched modal-checkbox" onfocus="this.select()"
                      >
                      <span class="checkmark" style="left: 78px;"></span>
                    </div>
                  </label>
                <!-- <label class="inline" for="addtermcheck"></label> -->
                
              </div>
              <button type="button" id="addtermbtn" name="addtermbtn" title="save"
                class="btn save_btn btn-raised pull-right font-weight-bold ml-2" style="padding: 6px 28px !important;"
                [disabled]="!termForm.valid" (click)="saveTerm(termForm.valid)" 
              >
                SAVE
              </button>
              
            </div>
          </div>
        </form>
        <h5 class="modal-title form-header header-color font-custom-bold h5_terms_border" id="addPaymentLabel">
          Please Select Terms
        </h5>

        <div class="col-12 terms_border">
          <div class="col-12 mCustomScrollbar style-3">
            <div class="item termlist row product-list" id="term1{{index}}"
             *ngFor="let term of termList; let index = index" 
              [class.selected]="selectedTerm == index"
            >
              <div class="col-12 px-0">
                <div class="row">
                  <div class="col-md-1 px-0">
                    <!-- <input type="checkbox" id="termcheck{{index}}" name="term"
                      (change)="addRemoveTermsFromInvoice(term)"
                      [checked]="isTermInInvoice(term)"
                    /> -->
                    <!-- <label class="" for="termcheck{{$index}}"></label> -->
                    <label class="check">
                      <div class="col-1">
                        <input type="checkbox" id="termcheck{{index}}" name="term" (change)="addRemoveTermsFromInvoice(term)" [checked]="isTermInInvoice(term)" />
                        <span class="checkmark"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-md-9 pl-0">
                    <span style="vertical-align: top;word-break: break-all;"> {{term.terms}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<!-- PAYMENT MODAL -->
<div class="modal fade" id="addPaymentAddInvoice" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel"
  data-backdrop="static" data-keyboard="false"
>
  <div class="modal-dialog add-payment-dialog" role="document" >
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title form-header header-color font-custom-bold" id="addPaymentLabel12">
          Add Payment
        </h4>
        <a class="pull-right" (click)="closeAddPaymentModal()" style="margin-top: 6px;">
          <img src="assets/images/cross16.png" alt="logo">
        </a>
      </div>
      <div class="modal-body">
        <div class="col-12 px-0 add-payment" style="margin-bottom: 10px;">
          <div class="row">
            <div class="col-4 col-md-5">
              <form name="innerform1" #innerform1="ngForm">
                <div class=" form-group payment-input">
                  <div class="input-group" style="width: 100%">
                    <input type="number" id="paymentAmount2" name="paymentAmount" onclick="this.select()"
                      class="form-control default-height" min="0.00" [max]="addPaymentModal.balance"
                      [(ngModel)]="addPaymentModal.paid_amount" placeholder="Add Amount Paid"
                    >
                    <!-- <div class="form-error">
                      <span *ngIf="innerform1.controls.paymentAmount.error.max">Should be Less than Balance</span>
                    </div> -->
                  </div>
                </div>
              </form>
            </div>

            <div class="col-2 pl-0" style="margin-left: -6px;">
              <button class="btn btn-info btn-circle" (click)="addPaymentInModalPaymentList()" 
                [disabled]="!addPaymentModal.paid_amount || addPaymentModal.paid_amount > addPaymentModal.balance"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>

            <div class="col-6 col-md-5 pl-0">
              <input type="text" id="addPaymentDate12" name="paymentDate" class="form-control" placeholder="mm/dd/yyyy"
                [formControl]="paymentDate" matInput [matDatepicker]="picker2"
                (click)="picker2.open()" required readonly
              >
              <mat-datepicker #picker2 style="z-index: 8000"></mat-datepicker>
            </div>
          </div>
        </div>

        <div class="row mx-0 payment_modal_pg" style="background: #e0dede !important;">
          <div class="col-12">
            <div class="font-custom-bold float-left">
              Invoice
            </div>
            <div class="font-custom-bold float-right">
              {{ addPaymentModal.amount | currency:settings.currencyInText:'symbol':'1.2-2' }}
            </div>
          </div>
        </div>

        <div class="top_bot_mr_10">
            <div class="row mx-0">
              <div class="col-6 text-left">
                <span class="font-custom">{{settings.paid ? settings.paid : 'PAID_LABEL' | translate}}</span>
              </div>
              <div class="col-6 text-right" style="padding-right: 23px !important;">
                <span class="font-custom">{{(activeInvoice.amount - activeInvoice.balance) | currency:settings.currencyInText:(settings.currencyText ? 'code' : 'symbol'):'1.2-2'}}</span>
              </div>
            </div>
        </div>
        <hr style="margin-bottom: 0px !important;">

        <div class="row mx-0 payment_modal_pg"
          *ngFor="let payment of addPaymentModal.payments"
        >
          <div class="col-12 label_color">
            <div class="pull-left" style="border-top: none;">
              {{payment.date_of_payment | date}}
            </div>
            <div *ngIf="!payment.date_of_payment" class="pull-left" style="border-top: none;">
              {{formatedDate | date}}
            </div>
            <div class="pull-right" style="border-top: none;">
              {{payment.paid_amount | currency:settings.currencyInText:'symbol':'1.2-2'}}
            </div>
          </div>
        </div>

        <div class="row mx-0 payment_modal_pg" style="background: #e0dede !important; margin-top: 5px">
          <div class="col-12">
            <div class="font-custom-bold pull-left">
              Balance Due
            </div>
            <div class="font-custom-bold pull-right">
              {{ addPaymentModal.balance | currency:settings.currencyInText:'symbol':'1.2-2'}}
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="col-12 px-0">
          <button type="button" class="btn btn-raised btn-custom-2 pull-left margin-right--15"
            (click)="addPaymentModal.paid_amount = addPaymentModal.balance"
            [disabled]="addPaymentModal.balance == 0"
          >
            Full Payment
          </button>
          <button type="button" (click)="addPaymentsInInvoice()"
            class="btn btn-success btn-raised font-custom pull-right width20btn"
          >
            Done
          </button>
          <button type="button" class="btn btn-raised btn-custom-1 width20btn pull-right"
            (click)="closeAddPaymentModal()" style="margin-right: 12px;"
          >
            Cancel
          </button>
          
        </div>
      </div>
    </div>
  </div>
</div>
